<system.webServer>
  <httpErrors>
    <remove statusCode="404" subStatusCode="-1" />
    <error statusCode="404" prefixLanguageFilePath="" path="/error.aspx" responseMode="ExecuteURL" />
  </httpErrors>
  <rewrite>
    <rewriteMaps configSource="rewritemaps.config"/>
    <rules>
      <rule name="AddTrailingSlashRule">
        <match url="(.*[^/])$" />
        <conditions>
          <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
          <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
          <add input="{URL}" pattern="^.*\.(axd|asmx|xml|aspx)$" negate="true" />
          <!-- uncomment for umbraco sites <add input="{REQUEST_URI}" pattern="^/umbraco/" negate="true" /> -->
          <!-- uncomment for umbraco sites <add input="{REQUEST_URI}" pattern="^/install/" negate="true" /> -->
          <!-- uncomment for sites using WebAPI - change path as needed (assuming proper naming conventions) <add input="{REQUEST_URI}" pattern="^/api/" negate="true" /> -->
          <!-- uncomment for sites using bundling - change path as needed (assuming proper naming conventions) <add input="{REQUEST_URI}" pattern="^/Content/bundles/" negate="true" /> -->
          <!-- uncomment for sites using bundling - change path as needed (assuming proper naming conventions) <add input="{REQUEST_URI}" pattern="^/Scripts/bundles/" negate="true" /> -->
        </conditions>
        <action type="Redirect" url="{R:1}/" redirectType="Permanent" />
      </rule>
      <rule name="Rewrite Map Rule" stopProcessing="false">
        <conditions>
          <add input="{Static301Redirects:{REQUEST_URI}}" pattern="(.+)"/>
        </conditions>
        <!-- SSL Example change if not using an SSL -->
        <action type="Redirect" url="https://www.EXAMPLE.com{C:1}" appendQueryString="false" redirectType="Permanent"/>
      </rule>
      <rule name="CanonicalHostNameRule">
        <match url="(.*)" />
        <conditions>
          <add input="{HTTP_HOST}" pattern="localhost" negate="true"/>
          <add input="{HTTP_HOST}" pattern="aztekhq.com" negate="true"/>
          <add input="{HTTP_HOST}" pattern="aztekhosting.net" negate="true"/>
          <add input="{HTTP_HOST}" pattern="^www\.EXAMPLE\.com$" negate="true" />
        </conditions>
        <action type="Redirect" url="http://www.EXAMPLE.com/{R:1}" />
      </rule>
      <!-- SSL Example REMOVE if not using an SSL -->
      <rule name="Force HTTPS">
        <match url="(.*)" />
        <conditions>
          <add input="{HTTP_HOST}" pattern="localhost" negate="true"/>
          <add input="{HTTP_HOST}" pattern="aztekhq.com" negate="true"/>
          <add input="{HTTP_HOST}" pattern="aztekhosting.net" negate="true"/>
          <add input="{HTTPS}" pattern="off" />
        </conditions>
        <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" appendQueryString="true" redirectType="Permanent" />
      </rule>
    </rules>
  </rewrite>
</system.webServer>
